System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./Services.ts","./Models.ts"],(function(e){var t,n,o,i,r,l,u,a,s,c,f,d,h,v,g,p,m,w,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,u=e._decorator,a=e.Node,s=e.Prefab,c=e.AudioClip,f=e.Vec3,d=e.AudioSource,h=e.instantiate,v=e.Tween,g=e.UIOpacity,p=e.Component},function(e){m=e.Tile},function(e){w=e.tileService},function(e){y=e.gameModel}],execute:function(){var R,A,C,T,I,S,b,x,P,L,V,D,z,B,M,k,O,_;l._RF.push({},"c99ecuyAyZFGpw1op0xni6Y","Board",void 0);var U=u.ccclass,F=u.property,W=e("Direction",function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=3]="Up",e[e.Down=4]="Down",e}({}));e("Board",(R=U("Board"),A=F(a),C=F(s),T=F(a),I=F({type:c}),S=F({type:c}),b=F({type:c}),x=F({tooltip:"タイル移動アニメの秒数"}),R(((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"gridRoot",V,i(t)),o(t,"gridPrefab",D,i(t)),o(t,"tileRoot",z,i(t)),o(t,"mergeSound",B,i(t)),o(t,"moveSound",M,i(t)),o(t,"notMoveSound",k,i(t)),o(t,"moveDuration",O,i(t)),t.cells=[],t.origin=new f,t._audioSource=void 0,t}n(t,e);var l=t.prototype;return l.init=function(){this._audioSource=this.node.addComponent(d);var e=t.ColAmount,n=t.RowAmount,o=t.CellSize;this.cells=new Array(e*n).fill(null);var i=e*o,r=n*o;if(this.origin.set(-i/2+o/2,r/2-o/2,0),this.gridPrefab)for(var l=0;l<n;l++)for(var u=0;u<e;u++){var a=h(this.gridPrefab);a.setParent(this.gridRoot),a.setPosition(this.gridToLocal(u,l))}},l.toIndex=function(e,n){return n*t.ColAmount+e},l.toCR=function(e){return{col:e%t.ColAmount,row:e/t.ColAmount|0}},l.inBounds=function(e,n){return e>=0&&e<t.ColAmount&&n>=0&&n<t.RowAmount},l.gridToLocal=function(e,n){var o=this.origin.x+e*t.CellSize,i=this.origin.y-n*t.CellSize;return new f(o,i,0)},l.setAt=function(e,t,n){this.inBounds(e,t)&&(this.cells[this.toIndex(e,t)]=n,n&&(n.setParent(this.tileRoot),n.setPosition(this.gridToLocal(e,t))))},l.getAt=function(e,t){return this.inBounds(e,t)?this.cells[this.toIndex(e,t)]:null},l.popRandomEmpty=function(){for(var e=[],t=0;t<this.cells.length;t++)null===this.cells[t]&&e.push(t);if(0===e.length)return null;var n=e[Math.random()*e.length|0];return this.toCR(n)},l.spawnTileAt=function(e,t,n){if(!this.inBounds(e,t))return null;if(null!==this.getAt(e,t))return null;var o=w.create();return this.setAt(e,t,o),o},l.spawnRandomTile=function(){var e=this.popRandomEmpty();if(!e)return null;var t=Math.random()<.8?2:4;return this.spawnTileAt(e.col,e.row,t)},l.getTileValue=function(e){if(!e)return null;var t=e.getComponent(m);return t?t.value:null},l.isWall=function(e){if(!e||!e.isValid)return!1;var t=e.getComponent(m);return!(null==t||!t.isOther)},l.mergeSequence=function(e){for(var t=[],n=[],o=0;o<e.length;){var i=e[o],r=this.getTileValue(i);if(o+1<e.length){var l=e[o+1];if(r===this.getTileValue(l)){var u=2*r;t.push(i),n.push({into:i,from:l,newValue:u}),o+=2;continue}}t.push(i),o+=1}return{nodes:t,pending:n}},l.slideLogical=function(e){var n=this,o=[],i=[],l=[],u=!1,a=function(e){for(var t=[],a=[],s=function(){t.push({kind:"seg",idx:a}),a=[]},c=0;c<e.length;c++){var f=e[c],d=n.cells[f];n.isWall(d)?(s(),t.push({kind:"wall",widx:f,node:d})):a.push(f)}s();for(var h=new Set,v=0;v<t.length;v++){var g=t[v];if("seg"===g.kind){var p=g.idx,m=p.map((function(e){return n.cells[e]})).filter((function(e){return null!==e})),w=n.mergeSequence(m),y=w.nodes,R=w.pending,A=v-1>=0?t[v-1]:null,C=A&&"wall"===A.kind?A:null;if(C&&m.length>0){var T=m[0],I=n.getTileValue(T),S=n.getTileValue(C.node);if(I>S){for(var b=n.mergeSequence(m.slice(1)),x=b.nodes,P=b.pending,L=0;L<p.length;L++){var V=p[L],D=L<x.length?x[L]:null;if(n.cells[V]!==D&&(u=!0),n.cells[V]=D,D){var z=n.toCR(V),B=z.col,M=z.row;o.push({node:D,toIdx:V,toPos:n.gridToLocal(B,M)})}}for(var k,O=function(){var e=k.value,t=o.find((function(t){return t.node===e.into}));t&&i.push({from:e.from,into:e.into,toIdx:t.toIdx,toPos:t.toPos,newValue:e.newValue})},_=r(P);!(k=_()).done;)O();var U=C.widx;n.cells[U]=T;var F=n.toCR(U),W=F.col,q=F.row;o.push({node:T,toIdx:U,toPos:n.gridToLocal(W,q)}),u=!0,h.add(U),l.push({node:C.node,value:S});continue}}for(var N=0;N<p.length;N++){var E=p[N],G=N<y.length?y[N]:null;if(n.cells[E]!==G&&(u=!0),n.cells[E]=G,G){var H=n.toCR(E),j=H.col,Y=H.row;o.push({node:G,toIdx:E,toPos:n.gridToLocal(j,Y)})}}for(var Z,J=function(){var e=Z.value,t=o.find((function(t){return t.node===e.into}));t&&i.push({from:e.from,into:e.into,toIdx:t.toIdx,toPos:t.toPos,newValue:e.newValue})},K=r(R);!(Z=K()).done;)J()}}for(var Q=0;Q<t.length;Q++){var X=t[Q];if("wall"===X.kind){var $=X.widx;if(!h.has($)){var ee=n.toCR($),te=ee.col,ne=ee.row;o.push({node:X.node,toIdx:$,toPos:n.gridToLocal(te,ne)})}}}};if(e===W.Left||e===W.Right)for(var s=0;s<t.RowAmount;s++){a(this.lineIndicesRow(s,e===W.Left))}else for(var c=0;c<t.ColAmount;c++){a(this.lineIndicesCol(c,e===W.Up))}return u?this._audioSource.playOneShot(this.moveSound,.4):this._audioSource.playOneShot(this.notMoveSound,.3),setTimeout((function(){for(var e=i.length+l.length,t=0;t<e;t++)setTimeout((function(){n._audioSource.playOneShot(n.mergeSound,.5)}),80*t)}),100),{moves:o,merges:i,vanishes:l,moved:u||i.length>0||l.length>0}},l.lineIndicesRow=function(e,n){var o=[];if(n)for(var i=0;i<t.ColAmount;i++)o.push(this.toIndex(i,e));else for(var r=t.ColAmount-1;r>=0;r--)o.push(this.toIndex(r,e));return o},l.lineIndicesCol=function(e,n){var o=[];if(n)for(var i=0;i<t.RowAmount;i++)o.push(this.toIndex(e,i));else for(var r=t.RowAmount-1;r>=0;r--)o.push(this.toIndex(e,r));return o},l.reset=function(e){void 0===e&&(e={});for(var t=!!e.keepWalls,n=0;n<this.cells.length;n++){var o=this.cells[n];if(o&&o.isValid){try{v.stopAllByTarget(o)}catch(e){}var i=o.getComponent(g);if(i)try{v.stopAllByTarget(i)}catch(e){}var l=o.getComponent(m),u=!(null==l||!l.isOther);if(t&&u){var a=this.toCR(n),s=a.col,c=a.row;o.setParent(this.tileRoot),o.setPosition(this.gridToLocal(s,c))}else o.removeFromParent(),o.destroy(),this.cells[n]=null}else this.cells[n]=null}if(this.tileRoot&&this.tileRoot.isValid)for(var f,d=r(this.tileRoot.children.slice());!(f=d()).done;){var h=f.value;if(!this.cells.includes(h)){try{v.stopAllByTarget(h)}catch(e){}var p=h.getComponent(g);if(p)try{v.stopAllByTarget(p)}catch(e){}h.removeFromParent(),h.destroy()}}},l.canMoveInDirection=function(e){var n=this,o=function(e){for(var t=[],o=[],i=function(){t.push({kind:"seg",idx:o}),o=[]},r=0;r<e.length;r++){var l=e[r],u=n.cells[l];n.isWall(u)?(i(),t.push({kind:"wall",widx:l,node:u})):o.push(l)}i();for(var a=0;a<t.length;a++){var s=t[a];if("seg"===s.kind){for(var c=s.idx,f=!1,d=0;d<c.length;d++){if(null==n.cells[c[d]])f=!0;else if(f)return!0}for(var h=c.map((function(e){return n.cells[e]})).filter((function(e){return null!==e})),v=0;v+1<h.length;v++){if(n.getTileValue(h[v])===n.getTileValue(h[v+1]))return!0}var g=a-1>=0?t[a-1]:null;if(g&&"wall"===g.kind&&h.length>0)if(n.getTileValue(h[0])>n.getTileValue(g.node))return!0}}return!1};if(e===W.Left||e===W.Right)for(var i=0;i<t.RowAmount;i++){if(o(this.lineIndicesRow(i,e===W.Left)))return!0}else if(e===W.Up||e===W.Down)for(var r=0;r<t.ColAmount;r++){if(o(this.lineIndicesCol(r,e===W.Up)))return!0}return!1},l.checkGameOver=function(){this.canMoveInDirection(W.Left)||this.canMoveInDirection(W.Right)||this.canMoveInDirection(W.Up)||this.canMoveInDirection(W.Down)||y.gameOver()},t}(p)).CellSize=130,_.ColAmount=5,_.RowAmount=5,V=t((L=_).prototype,"gridRoot",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(L.prototype,"gridPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"tileRoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"mergeSound",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(L.prototype,"moveSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(L.prototype,"notMoveSound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(L.prototype,"moveDuration",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),P=L))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/ForeignTextCreator.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r("genRandomText",(function(r,n){void 0===r&&(r=5);void 0===n&&(n=12);var a=t(r,n);switch(++e%3){case 0:for(var o="",i=0;i<a;i++){var c=t(19968,40959);o+=String.fromCharCode(c)}return o;case 1:for(var u="‏",f=0;f<a;f++){var v=t(1569,1610);u+=String.fromCharCode(v),Math.random()<.18&&(u+=" ")}return u;case 2:for(var h="",s=0;s<a;s++){var C=t(2304,2431);h+=String.fromCharCode(C)}return h}return""})),n._RF.push({},"b7765mlralMkqSjnaikMEcW","ForeignTextCreator",void 0);r("CultureRegion",function(r){return r[r.China=0]="China",r[r.Arabic=1]="Arabic",r}({}));function t(r,n){return Math.floor(Math.random()*(n-r+1))+r}var e=0;n._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"19814KCP8dDJpLWKZWyxI3w","GameEvents",void 0);e("GameEvents",{ScoreUp:"scoreUp",HiScoreUp:"hiScoreUp",LevelUp:"levelUp",Moved:"moved",GameOver:"gameOver"});c._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./Models.ts","./Services.ts","./MediaInfo.ts","./GameOverUI.ts","./GameEvents.ts","./RandomTextManager.ts"],(function(e){var n,t,r,a,i,o,s,c,u,l,f,m,d,p,v,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Component},function(e){l=e.Board},function(e){f=e.gameModel},function(e){m=e.tileService},function(e){d=e.MediaInfo},function(e){p=e.GameOverUI},function(e){v=e.GameEvents},function(e){h=e.RandomTextManager}],execute:function(){var g,b,y,I,O,w,G,M,R;s._RF.push({},"9a230NSZ5FOCJ2KIoixRfeI","GameManager",void 0);var T=c.ccclass,x=c.property;e("GameManager",(g=T("GameManager"),b=x(l),y=x(d),I=x(p),g((G=n((w=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,r(n,"board",G,a(n)),r(n,"mediaInfo",M,a(n)),r(n,"gameOverUI",R,a(n)),n}t(n,e);var s=n.prototype;return s.onLoad=function(){this.board.init(),f.events.on(v.GameOver,this.gameOver,this)},s.onDestroy=function(){f.events.off(v.GameOver,this.gameOver,this)},s.start=function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.loadAsync();case 2:this.board.spawnRandomTile(),this.board.spawnRandomTile();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.gameOver=function(){this.gameOverUI.show()},s.reset=function(){this.board.reset(),f.reset(),this.mediaInfo.reset(),m.reset(),this.gameOverUI.hide(),h.instance.reset(),this.board.spawnRandomTile(),this.board.spawnRandomTile()},n}(u)).prototype,"board",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=n(w.prototype,"mediaInfo",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=n(w.prototype,"gameOverUI",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=w))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./LevelData.ts"],(function(e){var t,n,s,i,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,s=e.EventTarget},function(e){i=e.GameEvents},function(e){o=e.LevelMap}],execute:function(){n._RF.push({},"33eefW95IdMaa67SKUcZonD","GameModel",void 0);e("GameModel",function(){var e=n.prototype;function n(){this.events=new s,this._score=0,this._nextLevelUpCount=0,this._level=0,this._moveCount=0,this._multicultural=0,this._nextOtherSpawnCount=999,this.setOtherSpawnNext(),this.setLevelUpCount()}return e.addScore=function(e){this._score+=e,this.events.emit(i.ScoreUp,this._score)},e.levelUp=function(){this._level++,this.events.emit(i.LevelUp,this._level),this.setLevelUpCount(),1==this._level&&this.setOtherSpawnNext()},e.addMoveCount=function(){this._moveCount++,this.events.emit(i.Moved,this._moveCount),this._moveCount==this._nextLevelUpCount&&this.levelUp()},e.isOther=function(){var e=this._moveCount==this._nextOtherSpawnCount;return!!e&&(this.setOtherSpawnNext(),!0)},e.getLevelData=function(){var e=o.get(this._level);return null==e&&(e={TileLevelUpInterval:7,SpawnInterval:7,LevelUpCount:20,GetValue:function(){return Math.random()<.8?2:4},MaxValue:1024}),e},e.setLevelUpCount=function(){var e=this.getLevelData();this._nextLevelUpCount=this.moveCount+e.LevelUpCount},e.setOtherSpawnNext=function(){var e=this.getLevelData();this._nextOtherSpawnCount=this._moveCount+e.SpawnInterval},e.getValue=function(e){return e?this.getLevelData().GetValue():Math.random()<.7?2:4},e.gameOver=function(){this.events.emit(i.GameOver)},e.reset=function(){this._score=0,this._level=0,this._moveCount=0,this.events.emit(i.ScoreUp,this._score),this.events.emit(i.LevelUp,this._level),this.setOtherSpawnNext(),this.setLevelUpCount()},t(n,[{key:"score",get:function(){return this._score}},{key:"level",get:function(){return this._level}},{key:"moveCount",get:function(){return this._moveCount}},{key:"multicultural",get:function(){return this._multicultural}},{key:"nextOtherSpawnCount",set:function(e){this._nextOtherSpawnCount=e}}]),n}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Services.ts","./Models.ts","./share.ts"],(function(e){var t,r,n,i,a,o,s,c,l,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,c=e.Component},function(e){l=e.tileService},function(e){u=e.gameModel},function(e){h=e.shareToX}],execute:function(){var f,v,p,b,m,d,y;a._RF.push({},"4eb06qpeKVNbYEG/FadsJlB","GameOverUI",void 0);var L=o.ccclass,g=o.property;e("GameOverUI",(f=L("GameOverUI"),v=g(s),p=g(s),f((d=t((m=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"scoreLabel",d,i(t)),n(t,"vanishLabel",y,i(t)),t._formatter=new Intl.NumberFormat("ja-JP"),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1},a.show=function(){this.node.active=!0;var e=this._formatter.format(u.score);this.scoreLabel.string="今回のスコア: "+e,this.vanishLabel.string="対応した強制多文化: "+l.vanishOtherCount},a.shareX=function(){var e="「多文化 2048」をプレイ\nスコア:"+this._formatter.format(u.score)+"、対応した強制多文化:"+l.vanishOtherCount+"\nうまくやれば共生、ミスれば混乱。\n政策の一手で未来が変わる";h(e,location.href,["移民政策反対","移民反対","移民問題","2048"])},a.hide=function(){this.node.active=!1},t}(c)).prototype,"scoreLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(m.prototype,"vanishLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=m))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/GridMover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./Tile.ts","./Models.ts","./list.js"],(function(e){var n,t,r,a,o,i,s,c,u,l,d,p,f,v,m,g,_,h,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,i=e.createClass,s=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){u=e.cclegacy,l=e._decorator,d=e.Tween,p=e.UIOpacity,f=e.Component,v=e.tween,m=e.Vec3},function(e){g=e.Board},function(e){_=e.Tile},function(e){h=e.gameModel},function(e){b=e.default}],execute:function(){var y,P,w,k,x;u._RF.push({},"d7ed2rc0ZZMpqRH+I+zmQuQ","GridMover",void 0);var S=l.ccclass,C=l.property;e("GridMover",(y=S("GridMover"),P=C(g),y((x=n((k=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,r(n,"board",x,a(n)),n._busy=!1,n}t(n,e);var u=n.prototype;return u.cancelPostAnimations=function(){if(this.board){var e=this.board.tileRoot;if(e&&e.isValid)for(var n,t=o(e.children);!(n=t()).done;){var r=n.value;d.stopAllByTarget(r);var a=r.getComponent(p);if(a&&d.stopAllByTarget(a),r.__vanishPending)r.__vanishPending=!1,r.isValid&&(r.removeFromParent(),r.destroy());else{if(r.__appearPending){var i;(null!=(i=r.getComponent(p))?i:r.addComponent(p)).opacity=255;var s=r.__origScale;s&&r.setScale(s),r.__appearPending=!1}if(r.__popPending){var c=r.__origScale;c&&r.setScale(c),r.__popPending=!1}}}}},u.move=function(){var e=s(c().mark((function e(n){var t,r,a,i,s,u,l,d,f,g,y,P,w,k,x,S,C,M,T,V,G,R,z,A,B,F,D,I,L,Y,H,O;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cancelPostAnimations(),this.board&&!this._busy){e.next=3;break}return e.abrupt("return");case 3:if((r=this.board.slideLogical(n)).moved&&h.addMoveCount(),r.moved||r.moves.some((function(e){return!e.node.position.equals(e.toPos)}))){e.next=8;break}return e.abrupt("return");case 8:this._busy=!0,a=null!=(t=this.board.moveDuration)?t:.12,i=[],s=c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value,i.push(new Promise((function(e){v(n.node).to(a,{position:n.toPos}).call((function(){return e()})).start()})));case 2:case"end":return e.stop()}}),e)})),u=o(r.moves);case 13:if((l=u()).done){e.next=17;break}return e.delegateYield(s(),"t0",15);case 15:e.next=13;break;case 17:d=c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.value,i.push(new Promise((function(e){v(n.from).to(a,{position:n.toPos}).call((function(){return e()})).start()})));case 2:case"end":return e.stop()}}),e)})),f=o(r.merges);case 19:if((g=f()).done){e.next=23;break}return e.delegateYield(d(),"t1",21);case 21:e.next=19;break;case 23:return e.next=25,Promise.all(i);case 25:for(y=o(r.merges);!(P=y()).done;)w=P.value,(k=w.into.getComponent(_))&&k.setValue(w.newValue);if(this._busy=!1,!(r.merges.length>0)){e.next=35;break}.08,.08,1.15,x=c().mark((function e(){var n,t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C.value,t=n.into,r=t.scale.clone(),t.__popPending=!0,t.__origScale=r,v(t).to(.08,{scale:new m(1.15*r.x,1.15*r.y,r.z)}).to(.08,{scale:r}).call((function(){t.__popPending=!1})).start();case 6:case"end":return e.stop()}}),e)})),S=o(r.merges);case 31:if((C=S()).done){e.next=35;break}return e.delegateYield(x(),"t2",33);case 33:e.next=31;break;case 35:for(M=[],T=o(r.merges);!(V=T()).done;)G=V.value,M.push(G.from);for(R=o(r.vanishes);!(z=R()).done;)A=z.value,M.push(A.node);B=c().mark((function e(){var n,t,r,a,o,i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=D[F])&&t.isValid){e.next=3;break}return e.abrupt("return",1);case 3:t.__vanishPending=!0,(r=null!=(n=t.getComponent(p))?n:t.addComponent(p)).opacity=255,a=t.scale.clone().multiplyScalar(.5),o=!1,i=!1,s=function(){t.__vanishPending&&o&&i&&(t.__vanishPending=!1,t.isValid&&(t.removeFromParent(),t.destroy()))},v(t).to(.16,{scale:a}).call((function(){o=!0,s()})).start(),v(r).to(.16,{opacity:0}).call((function(){i=!0,s()})).start();case 11:case"end":return e.stop()}}),e)})),F=0,D=M;case 40:if(!(F<D.length)){e.next=47;break}return e.delegateYield(B(),"t3",42);case 42:if(!e.t3){e.next=44;break}return e.abrupt("continue",44);case 44:F++,e.next=40;break;case 47:I=new b(r.merges).Sum((function(e){var n;return null!=(n=null==e?void 0:e.newValue)?n:0})),I+=new b(r.vanishes).Sum((function(e){var n;return 2*(null!=(n=null==e?void 0:e.value)?n:0)})),h.addScore(I),(L=this.board.spawnRandomTile())&&(H=null!=(Y=L.getComponent(p))?Y:L.addComponent(p),O=L.scale.clone(),H.opacity=0,L.setScale(O.clone().multiplyScalar(.5)),L.__appearPending=!0,L.__origScale=O,v(L).to(.14,{scale:O}).call((function(){L.__appearPending=!1})).start(),v(H).to(.14,{opacity:255}).start()),this.board.checkGameOver();case 53:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),i(n,[{key:"busy",get:function(){return this._busy}}]),n}(f)).prototype,"board",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=k))||w));u._RF.pop()}}}));

System.register("chunks:///_virtual/HiScoreModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Models.ts","./GameEvents.ts"],(function(e){var t,i,c,o,r,s;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,c=e.sys,o=e.EventTarget},function(e){r=e.gameModel},function(e){s=e.GameEvents}],execute:function(){i._RF.push({},"c7e39VwIz1FtZI5bVfVLggE","HiScoreModel",void 0);var n=c.localStorage,h="cultureMerge:bestScore";e("HiScoreModel",function(){function e(){this.events=new o,this._hiScore=0;var e=n.getItem(h);if(null!=e){var t=Number(e);this._hiScore=Number.isFinite(t)?t:0}r.events.on(s.ScoreUp,this.checkHiScore,this),this.events.emit(s.HiScoreUp,this._hiScore)}return e.prototype.checkHiScore=function(e){e<=this._hiScore||(this._hiScore=e,n.setItem(h,e),this.events.emit(s.HiScoreUp,this._hiScore))},t(e,[{key:"hiScore",get:function(){return this._hiScore}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HiScoreValue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Models.ts","./GameEvents.ts"],(function(e){var t,r,o,i,n,a,c,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Label,s=e.Component},function(e){l=e.hiScoreModel},function(e){u=e.GameEvents}],execute:function(){var p,f,h,v,b;n._RF.push({},"b1beddBXLtLz4jIVhpe/afP","HiScoreValue",void 0);var L=a.ccclass,d=a.property;e("HiScoreLabel",(p=L("HiScoreLabel"),f=d(c),p((b=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._formatter=new Intl.NumberFormat("ja-JP"),o(t,"valueLabel",b,i(t)),t}r(t,e);var n=t.prototype;return n.onLoad=function(){l.events.on(u.HiScoreUp,this.scoreUp,this)},n.start=function(){this.scoreUp(l.hiScore)},n.onDestroy=function(){l.events.off(u.HiScoreUp,this.scoreUp,this)},n.scoreUp=function(e){this.valueLabel.string=this._formatter.format(e)},t}(s)).prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=v))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/ImputController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./GridMover.ts","./SwipeController.ts"],(function(e){var o,n,t,i,r,s,l,a,c,u,p,f,v;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.input,a=e.Input,c=e.KeyCode,u=e.Component},function(e){p=e.Direction},function(e){f=e.GridMover},function(e){v=e.SwipeController}],execute:function(){var h,y,w,b,D,d,m;r._RF.push({},"da66eqIlH1DcKnbuplszEeG","ImputController",void 0);var R=s.ccclass,_=s.property;e("InputController",(h=R("InputController"),y=_(f),w=_(v),h((d=o((D=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o=e.call.apply(e,[this].concat(r))||this,t(o,"mover",d,i(o)),t(o,"swiper",m,i(o)),o}n(o,e);var r=o.prototype;return r.onEnable=function(){l.on(a.EventType.KEY_DOWN,this.onKeyDown,this)},r.onDisable=function(){l.off(a.EventType.KEY_DOWN,this.onKeyDown,this)},r.onLoad=function(){this.swiper.events.on("swipe",this.onMove,this)},r.onDestroy=function(){this.swiper.events.off("swipe",this.onMove,this)},r.onKeyDown=function(e){if(this.mover&&!this.mover.busy){var o=null;switch(e.keyCode){case c.ARROW_LEFT:o=p.Left;break;case c.ARROW_RIGHT:o=p.Right;break;case c.ARROW_UP:o=p.Up;break;case c.ARROW_DOWN:o=p.Down}null!==o&&this.onMove(o)}},r.onMove=function(e){this.mover.move(e)},o}(u)).prototype,"mover",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=o(D.prototype,"swiper",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=D))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelData.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"96a0aOtiQBD0bcclzcvX+y3","LevelData",void 0);e("LevelMap",new Map([[0,{TileLevelUpInterval:999,SpawnInterval:999,LevelUpCount:10,GetValue:function(){return 2},MaxValue:32}],[1,{TileLevelUpInterval:5,SpawnInterval:6,LevelUpCount:25,GetValue:function(){return Math.random()<.5?4:8},MaxValue:64}],[2,{TileLevelUpInterval:5,SpawnInterval:6,LevelUpCount:30,GetValue:function(){return Math.random()<.6?8:16},MaxValue:128}],[3,{TileLevelUpInterval:6,SpawnInterval:7,LevelUpCount:35,GetValue:function(){return Math.random()<.6?16:32},MaxValue:256}],[4,{TileLevelUpInterval:6,SpawnInterval:7,LevelUpCount:40,GetValue:function(){return Math.random()<.7?32:64},MaxValue:512}],[5,{TileLevelUpInterval:7,SpawnInterval:8,LevelUpCount:Number.MAX_SAFE_INTEGER,GetValue:function(){return Math.random()<.7?64:128},MaxValue:1024}]])),e("NextLevelInterval",new Map([[2,5],[4,6],[8,7],[16,8],[32,12],[64,18],[128,26],[256,45],[512,65],[1024,Number.MAX_SAFE_INTEGER]]));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelUp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,a,r,o,u,c,l,s,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,u=t._decorator,c=t.UIOpacity,l=t.tween,s=t.Vec3,p=t.Component}],execute:function(){var h,y,d,f,v,b,g,w,O,m;o._RF.push({},"ee811L0wrhF64YAGCTOecYv","LevelUp",void 0);var z=u.ccclass,L=u.property;t("LevelUp",(h=z("LevelUp"),y=L(c),h(((m=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,n(i,"uiOpacity",v,a(i)),n(i,"moveDistance",b,a(i)),n(i,"durationIn",g,a(i)),n(i,"durationStay",w,a(i)),n(i,"durationOut",O,a(i)),i}e(i,t);var o=i.prototype;return o.onLoad=function(){i._instance=this,this.node.active=!1},o.show=function(){var t=this;this.node.active=!0,this.uiOpacity.opacity=0;var i=this.node.position.clone();this.node.setPosition(i.x,i.y-this.moveDistance,i.z),l(this.node).parallel(l(this.node).to(this.durationIn,{position:new s(i.x,i.y,i.z)},{easing:"cubicOut"}),l(this.uiOpacity).to(this.durationIn,{opacity:255},{easing:"quadOut"})).delay(this.durationIn).parallel(l(this.uiOpacity).to(this.durationOut,{opacity:0},{easing:"quadIn"})).call((function(){t.node.active=!1})).start()},r(i,null,[{key:"instance",get:function(){if(!this._instance)throw new Error("LevelUp is not initialized. シーンに LevelUp を置いてください。");return this._instance}}]),i}(p))._instance=null,v=i((f=m).prototype,"uiOpacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(f.prototype,"moveDistance",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),g=i(f.prototype,"durationIn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),w=i(f.prototype,"durationStay",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=i(f.prototype,"durationOut",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelValue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Models.ts","./GameEvents.ts","./LevelUp.ts"],(function(e){var t,n,l,i,o,r,a,s,u,c,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.Label,s=e.Component},function(e){u=e.gameModel},function(e){c=e.GameEvents},function(e){v=e.LevelUp}],execute:function(){var p,f,L,h,y;o._RF.push({},"27d82saghFLHrXZyeJy2fuV","LevelValue",void 0);var d=r.ccclass,b=r.property;e("LevelValue",(p=d("LevelValue"),f=b(a),p((y=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l(t,"valueLabel",y,i(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){u.events.on(c.LevelUp,this.levelUp,this)},o.start=function(){this.levelUp(u.level)},o.onDestroy=function(){u.events.off(c.LevelUp,this.levelUp,this)},o.levelUp=function(e){this.valueLabel.string="多文化強制レベル: "+e,e>=1&&v.instance.show()},t}(s)).prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=h))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/LinkLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,i,o,l,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Component}],execute:function(){var c,u,s;o._RF.push({},"cda29BpTzxLbLqdrjVo1dyy","LinkLabel",void 0);var p=l.ccclass,L=l.property;e("LinkLabel",p("LinkLabel")((s=r((u=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,t(r,"url",s,i(r)),r}return n(r,e),r.prototype.onClick=function(){this.url&&window.open(this.url,"_blank")},r}(a)).prototype,"url",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Board.ts","./GameEvents.ts","./GameManager.ts","./GridMover.ts","./ForeignTextCreator.ts","./RandomText.ts","./RandomTextManager.ts","./RandomTextPool.ts","./LinkLabel.ts","./ObjectPool.ts","./Queue.ts","./share.ts","./GameModel.ts","./HiScoreModel.ts","./LevelData.ts","./Models.ts","./Services.ts","./TileService.ts","./OtherTile.ts","./Tile.ts","./GameOverUI.ts","./HiScoreValue.ts","./ImputController.ts","./LevelUp.ts","./LevelValue.ts","./MediaInfo.ts","./ScoreValue.ts","./SwipeController.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MediaInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Models.ts","./GameEvents.ts","./RandomTextManager.ts"],(function(e){var t,s,a,n,o,l,i,r,u,p,c,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,i=e._decorator,r=e.Label,u=e.Node,p=e.Component},function(e){c=e.gameModel},function(e){h=e.GameEvents},function(e){m=e.RandomTextManager}],execute:function(){var f,v,w,g,d,b,I,M,y,L;l._RF.push({},"bf1e3TDhW1BqJnt/WjMtA0g","MediaInfo",void 0);var _=i.ccclass,E=i.property;e("MediaInfo",(f=_("MediaInfo"),v=E(r),w=E(u),g=E(u),f(((L=function(e){function t(){for(var t,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,a(t,"message",I,n(t)),a(t,"balloon",M,n(t)),a(t,"button",y,n(t)),t._updateInterval=0,t._url="",t}s(t,e);var l=t.prototype;return l.onLoad=function(){this.updateInfo(t.FirstInfo,!1),c.events.on(h.Moved,this.onMoved,this),c.events.on(h.LevelUp,this.onLevelUp,this)},l.onDestroy=function(){c.events.off(h.Moved,this.onMoved,this),c.events.on(h.LevelUp,this.onLevelUp,this)},l.onMoved=function(){var e,s;if(this._updateInterval--,!(this._updateInterval>0)){for(var a,n=m.instance.amount,l=[],i=o(t.NewsInfo);!(a=i()).done;){var r=a.value,u=r[0],p=r[1];if(u>n)break;u<=n&&u>=n/2&&l.push.apply(l,p)}if(0==l.length)return this._url="",void this.updateInfo("",!1);var c=l[Math.floor(Math.random()*l.length)];this._url=null!=(e=null==c?void 0:c.url)?e:"",this.updateInfo(null!=(s=null==c?void 0:c.message)?s:"",!1)}},l.onLevelUp=function(e){var s,a,n=t.LevelUpInfo.get(e);this._url=null!=(s=null==n?void 0:n.url)?s:"",this.updateInfo(null!=(a=null==n?void 0:n.message)?a:"",!0)},l.updateInfo=function(e,s){this._updateInterval=s?t.LevelUpInterval:t.Interval,null!=e&&""!=e?(this.message.string=e,this.balloon.active=!0,this.button.active=""!=this._url):this.balloon.active=!1},l.reset=function(){this._url="",this.updateInfo("",!1)},l.toNews=function(){this._url&&window.open(this._url,"_blank")},t}(p)).LevelUpInfo=new Map([[1,{message:"2019年。労働力不足を背景に、新たな在留資格『特定技能2号』が創設されました。これにより、外国人労働者の流入が一層進むと見込まれています。",url:"https://gobit.co.jp/business/specific-skill/"}],[2,{message:"2023年。家族帯同や社会保障加入が可能となり、在留の長期化が進む特定技能2号。その対象分野が拡充され、さらなる外国人人材の受け入れが広がっています。",url:"https://www.sankei.com/article/20230627-JQOPLKNLEVOBVFO6LZ6MAW66LU/"}],[3,{message:"2024年。総理大臣が『留学生は我が国の宝』と発言。実際に海外からの留学生支援に多額の公費が投じられています。",url:"https://www.sankei.com/article/20240102-2C3WNTOL5RI7VE2DNHYDOFD36I/"}],[4,{message:"2025年。政府によるインド・アフリカとの人材交流、東京都によるエジプト人材受け入れなど、国際的な人材往来が加速しています。",url:"https://news.yahoo.co.jp/articles/b000fe457028263b3ea7342863c02715a7a970cc"}],[5,{message:"2025年。多文化共生を掲げる自治体や学校の取り組みが拡大。国政では『多文化共生庁の創設』をめぐる議論も進んでおり、社会全体に変化の波が広がっています。",url:"https://www.google.com/search?q=%E5%A4%9A%E6%96%87%E5%8C%96%E5%85%B1%E7%94%9F%E5%BA%81"}]]),L.NewsInfo=new Map([[4,[{message:"ごみ出しルールを多言語で掲示する自治体が増える一方、実際の運用が徹底されず混乱が生じている地域もあるようです。",url:"https://www.sankei.com/article/20240205-Q77HYYUTKNIEXEWEFBRFUYCVHI/"},{message:"生活音やマナーをめぐり、地域住民との間で摩擦が生じるケースが報告されています。",url:"https://ryukyushimpo.jp/news/region/entry-3181113.html"}]],[8,[{message:"日本語が十分に理解できない児童生徒が増え、現場の教職員に大きな負担がかかっているとの声が上がっています。",url:"https://www.nikkei.com/article/DGXZQOUE068AH0W4A800C2000000/"},{message:"河川敷などでのマナーが悪いバーベキュー利用者が増え、片付けやごみの放置をめぐる問題が取り上げられています。",url:"https://s.mxtv.jp/tokyomxplus/mx/article/202408221000/detail/"}]],[12,[{message:"東京大学では、留学生の比率が過去最高水準となり、国際化の進展とともに国内学生への影響を懸念する声も出ています。",url:"https://president.jp/articles/-/101016?page=3"},{message:"宗教上の理由で食材を制限する給食対応をめぐり、公立学校の在り方について議論が起こっています。",url:"https://news.yahoo.co.jp/articles/8117800570ef0a6b18d932647aca607cdaba8cc5"}]],[18,[{message:"外国籍住民が給付金など社会保障制度の対象に含まれるケースが増え、公平性や制度運用の妥当性について議論が起こっています。",url:"https://www.sankei.com/article/20250328-IMNAMRJ2PNF3ZCYXZLHMWZLYVE/"},{message:"留学生支援に充てられる税金の規模をめぐり、国民の間で是非の議論が続いています。",url:"https://dnr5150.net/blog-191/"}]],[26,[{message:"各地でモスク建設の計画が進み、地域住民との合意形成をめぐって意見が分かれています。",url:"https://voice.charity/events/7327"},{message:"健康保険料の未納・滞納に関するデータが注目され、制度の見直しを求める声も一部で上がっています。",url:"https://www.sankei.com/article/20250603-VVXAMRJ4PVCCZGV7WAHIZ7DISI/"}]],[36,[{message:"農作物や金属資材などの盗難が相次ぎ、地域の治安維持と監視体制の強化が課題となっています。",url:"https://www.sankei.com/article/20250612-7KH463NSNZE5PP2MITN2AGFUSQ/"},{message:"公共空間での宗教的行為をどう扱うか、自治体と住民の間で新たな課題が浮上しています。",url:"https://www.afpbb.com/articles/-/3151744"}]],[48,[{message:"宗教や文化の多様化に伴い、土葬を求める声が一部で上がり、自治体は対応を迫られています。",url:"https://www.ishitomo.com/blog/10259.php"},{message:"自動販売機や公共施設の破損被害が増加傾向にあり、防犯意識の向上が求められています。",url:"https://www.j-cast.com/2025/04/15503510.html?p=all"}]],[62,[{message:"外食産業に対して、特定の食材を使わないよう求める要望が増え、企業の対応が注目されています。",url:"https://www.japasian-ltd.com/blog/inbound-restaurant-halal/"},{message:"一部地域で、特定の出身国の住民が集中するエリアが形成されつつあり、地域の在り方をめぐって議論が起きています。",url:"https://news.yahoo.co.jp/articles/adbc0ca641218fbc74887e7f69dd700a2baa9257"}]]]),L.FirstInfo="日本文化タイルを移動して、おなじ数字どうしを組み合わせて大きく育てよう！時々現れる多文化タイルは、より大きな数字の日本文化タイルをぶつけて取り込もう！",L.LevelUpInterval=8,L.Interval=5,I=t((b=L).prototype,"message",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(b.prototype,"balloon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"button",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=b))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/Models.ts",["cc","./GameModel.ts","./HiScoreModel.ts"],(function(e){var o,c,t;return{setters:[function(e){o=e.cclegacy},function(e){c=e.GameModel},function(e){t=e.HiScoreModel}],execute:function(){o._RF.push({},"b2e36hzsWFGM5ZYH/C8cztF","Models",void 0);e("gameModel",new c),e("hiScoreModel",new t);o._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n,i,a,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Prefab,l=e.instantiate,p=e.Component}],execute:function(){var s,u,f,h,b;i._RF.push({},"f6dc7f+BbRNIrz2Rewmpw2r","ObjectPool",void 0);var d=a.ccclass,v=a.property;e("ObjectPool",(s=d("ObjectPool"),u=v(c),s((b=t((h=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"prefab",b,n(t)),t._pool=[],t}o(t,e);var i=t.prototype;return i.rent=function(){var e;if(this._pool.length>0)e=this._pool.pop();else{var t=l(this.prefab);e=this.getPoolComponent(t),this.node.addChild(t)}return e.node.active=!0,e},i.return=function(e){e.node.active=!1,this._pool.push(e)},t}(p)).prototype,"prefab",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/OtherTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./Models.ts","./GameEvents.ts","./RandomTextManager.ts","./LevelData.ts"],(function(e){var t,n,a,s,i,l,r,o,u,v;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,a=e.assertThisInitialized},function(e){s=e.cclegacy,i=e._decorator},function(e){l=e.Tile},function(e){r=e.gameModel},function(e){o=e.GameEvents},function(e){u=e.RandomTextManager},function(e){v=e.NextLevelInterval}],execute:function(){var c;s._RF.push({},"9fc9cazwTBFlrPjVq0biN2M","OtherTile",void 0);var h=i.ccclass;i.property,e("OtherTile",h("OtherTile")(c=function(e){function s(){var t;return(t=e.call(this)||this)._levelUpCnt=999,t._isMaxLevel=!1,t._destroyCallback=void 0,t._rndTexts=[],t._currentData=void 0,r.events.on(o.Moved,t.onMoved,a(t)),r.events.on(o.LevelUp,t.onGameLevelUp,a(t)),t}t(s,e);var i=s.prototype;return i.onDestroy=function(){null!=this._destroyCallback&&(this._destroyCallback(),this._rndTexts.forEach((function(e){u.instance.return(e)}))),r.events.off(o.Moved,this.onMoved,this),r.events.off(o.LevelUp,this.onGameLevelUp,this)},i.setDestroyCallback=function(e){this._destroyCallback=e},i.onMoved=function(){if(this._levelUpCnt--,!this._isMaxLevel&&this._levelUpCnt<=0){var e;this._currentData=r.getLevelData(),this.setValue(2*this._value);var t=null!=(e=v.get(this.value))?e:20;this._levelUpCnt=t;var n=u.instance.add(),a=u.instance.add();this._rndTexts.push(n),this._rndTexts.push(a)}},i.onGameLevelUp=function(){this._currentData=r.getLevelData(),this._isMaxLevel=this._value>=this._currentData.MaxValue},i.init=function(e){var t;this._currentData=r.getLevelData(),this.setValue(e);var n=null!=(t=v.get(e))?t:20;this._levelUpCnt=n;for(var a=2*Math.log2(e),s=0;s<a;s++){var i=u.instance.add();this._rndTexts.push(i)}},i.setValue=function(e){this._value=e,this.valueLabel.string=String(e),this._isMaxLevel=this._value>=this._currentData.MaxValue},n(s,[{key:"isOther",get:function(){return!0}}]),s}(l))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/Queue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"92f5cZleZRK7YrSY41pxDAK","Queue",void 0);e("Queue",function(){function e(){this._items=[]}var n=e.prototype;return n.enqueueRange=function(e){void 0===e&&(e=[]),this._items=[].concat(e)},n.enqueue=function(e){this._items.push(e)},n.dequeue=function(){return this._items.shift()},n.peek=function(){return this._items[0]},n.isEmpty=function(){return 0===this._items.length},t(e,[{key:"length",get:function(){return this._items.length}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RandomText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,c=e.Component}],execute:function(){var s,u,p,f,b;o._RF.push({},"7f22b8OLUxLuaian2afPT7/","RandomText",void 0);var d=a.ccclass,y=a.property;e("RandomText",(s=d("RandomText"),u=y(l),s((b=t((f=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"label",b,i(t)),t}return n(t,e),t.prototype.setText=function(e){this.label.string=e},t}(c)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/RandomTextManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomTextPool.ts","./ForeignTextCreator.ts"],(function(t){var n,e,o,r,i,a,s,l,u,c,d,h,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.UITransform,u=t.tween,c=t.Vec3,d=t.Component},function(t){h=t.RandomTextPool},function(t){p=t.genRandomText}],execute:function(){var m,f,g,y,_,v,x,T,w,R;a._RF.push({},"6251eUOBEZIFJ7oRTOZxSSr","RandomTextManager",void 0);var b=s.ccclass,M=s.property;t("RandomTextManager",(m=b("RandomTextManager"),f=M(l),g=M(l),y=M(h),m(((R=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,o(n,"trans1",x,r(n)),o(n,"trans2",T,r(n)),o(n,"pool",w,r(n)),n._amount=0,n._cnt=1,n}e(n,t);var a=n.prototype;return a.onLoad=function(){n._instance=this;var t=this.trans1.node.position.clone();u(this.trans1.node).repeatForever(u().to(.8,{position:new c(t.x,t.y+5,t.z)}).to(.8,{position:t})).start(),u(this.trans2.node).delay(1).repeatForever(u().to(.8,{position:new c(t.x,t.y+5,t.z)},{easing:"sineInOut"}).to(.8,{position:t},{easing:"sineInOut"})).start()},a.add=function(){var t=p(),n=this.pool.rent();n.setText(t);var e=this._cnt++%2==0?this.trans1:this.trans2,o=(Math.random()-.5)*e.width,r=(Math.random()-.5)*e.height;return n.node.setPosition(new c(o,r,0)),e.node.addChild(n.node),this._amount++,n},a.return=function(t){this.pool.return(t),this._amount>0&&this._amount--},a.reset=function(){this._amount=0,this.trans1.node.removeAllChildren(),this.trans2.node.removeAllChildren()},i(n,[{key:"amount",get:function(){return this._amount}}],[{key:"instance",get:function(){if(!this._instance)throw new Error("RandomTextManager is not initialized. シーンに CloudManager を置いてください。");return this._instance}}]),n}(d))._instance=null,x=n((v=R).prototype,"trans1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=n(v.prototype,"trans2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=n(v.prototype,"pool",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=v))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/RandomTextPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./RandomText.ts"],(function(o){var t,n,e,c,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator},function(o){c=o.ObjectPool},function(o){r=o.RandomText}],execute:function(){var u;n._RF.push({},"bf843p6n+ZBJa5zYGSqoMcs","RandomTextPool",void 0);var s=e.ccclass;e.property,o("RandomTextPool",s("RandomTextPool")(u=function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n.prototype.getPoolComponent=function(o){return o.getComponent(r)},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreValue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Models.ts","./GameEvents.ts"],(function(e){var t,r,o,n,a,i,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,s=e.Label,l=e.Component},function(e){c=e.gameModel},function(e){u=e.GameEvents}],execute:function(){var p,f,v,h,b;a._RF.push({},"5011aFI6ZpFIpQOZzyolnjL","ScoreValue",void 0);var m=i.ccclass,y=i.property;e("ScoreLabel",(p=m("ScoreLabel"),f=y(s),p((b=t((h=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._formatter=new Intl.NumberFormat("ja-JP"),o(t,"valueLabel",b,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c.events.on(u.ScoreUp,this.scoreUp,this),this.valueLabel.string="0"},a.onDestroy=function(){c.events.off(u.ScoreUp,this.scoreUp,this)},a.scoreUp=function(e){this.valueLabel.string=this._formatter.format(e)},t}(l)).prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=h))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Services.ts",["cc","./TileService.ts"],(function(e){var c,i;return{setters:[function(e){c=e.cclegacy},function(e){i=e.TileService}],execute:function(){c._RF.push({},"18507yctgNEn6Dpy08abBsP","Services",void 0);e("tileService",new i);c._RF.pop()}}}));

System.register("chunks:///_virtual/share.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e({shareToLine:function(e,n){var t=null!=n?n:"";e&&(t="https://example.com/?text="+encodeURIComponent(e));var r="https://social-plugins.line.me/lineit/share?"+new URLSearchParams({url:t}).toString();window.open(r,"_blank","noopener,noreferrer")},shareToX:function(e,n,t){var r=e;n&&(r+="\n"+n);t&&t.length>0&&(r+="\n"+t.map((function(e){return"#"+e})).join(" "));var o="https://twitter.com/intent/tweet?"+new URLSearchParams({text:r}).toString();window.open(o,"_blank","noopener,noreferrer")}}),n._RF.push({},"40774fbl51BTZLr8JS/jqYG","share",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/SwipeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts"],(function(t){var e,n,o,i,s,r,h,a,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.EventTarget,a=t.Node,c=t.Vec2,l=t.Component},function(t){u=t.Direction}],execute:function(){var p,T,f,d;s._RF.push({},"7f6abtsWd5OA4e6PNnnMbDI","SwipeController",void 0);var y=r.ccclass,E=r.property;t("SwipeController",y("SwipeController")((f=e((T=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).events=new h,o(e,"swipeThreshold",f,i(e)),o(e,"maxSwipeTimeSec",d,i(e)),e.startPos=null,e.startTime=0,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.MOUSE_LEAVE,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},s.onDestroy=function(){this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.MOUSE_LEAVE,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},s.onTouchStart=function(t){var e=t.getUILocation();this.startPos=new c(e.x,e.y),this.startTime=performance.now()},s.onTouchEnd=function(t){if(this.startPos){var e=t.getUILocation(),n=new c(e.x-this.startPos.x,e.y-this.startPos.y),o=Math.abs(n.x),i=Math.abs(n.y),s=(performance.now()-this.startTime)/1e3;if(Math.hypot(n.x,n.y)<this.swipeThreshold||s>this.maxSwipeTimeSec)this.startPos=null;else{var r=u.None;r=o>i?n.x>0?u.Right:u.Left:n.y>0?u.Up:u.Down,this.startPos=null,this.events.emit("swipe",r)}}},s.onTouchCancel=function(t){this.startPos=null},e}(l)).prototype,"swipeThreshold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=e(T.prototype,"maxSwipeTimeSec",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),p=T))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Services.ts"],(function(e){var t,i,r,n,l,a,s,u,o,p,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,l=e.createClass},function(e){a=e.cclegacy,s=e._decorator,u=e.Label,o=e.Sprite,p=e.SpriteFrame,c=e.Component},function(e){f=e.tileService}],execute:function(){var h,v,b,g,y,L,m,_,z,d,S;a._RF.push({},"bffdavs4ppLjoUjfHzjUyMD","Tile",void 0);var T=s.ccclass,w=s.property;e("Tile",(h=T("Tile"),v=w(u),b=w(o),g=w(o),y=w({type:[p]}),h((_=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(t,"valueLabel",_,n(t)),r(t,"bg",z,n(t)),r(t,"sprite",d,n(t)),r(t,"spriteList",S,n(t)),t._value=2,t}i(t,e);var a=t.prototype;return a.init=function(e){this.setValue(e)},a.setValue=function(e){this._value=e,this.valueLabel&&(this.valueLabel.string=String(e));var t=f.getData(e);null!=t&&(this.bg.color=t.TileColor,this.spriteList.length>t.Level?this.sprite.spriteFrame=this.spriteList[t.Level]:this.sprite.spriteFrame=this.spriteList[this.spriteList.length-1])},l(t,[{key:"isOther",get:function(){return!1}},{key:"level",get:function(){return Math.log2(this._value)}},{key:"value",get:function(){return this._value}}]),t}(c)).prototype,"valueLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(m.prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(m.prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(m.prototype,"spriteList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=m))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/TileService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./Models.ts"],(function(e){var t,n,r,i,o,l,a,s,u,c;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy,o=e.instantiate,l=e.Color,a=e.resources,s=e.Prefab},function(e){u=e.Tile},function(e){c=e.gameModel}],execute:function(){i._RF.push({},"4928cYcOwhC8YwSoAR+848P","TileService",void 0);e("TileService",function(){function e(){this._levelMap=new Map([[2,{TileColor:new l(250,245,235),Level:0}],[4,{TileColor:new l(236,218,188),Level:1}],[8,{TileColor:new l(242,177,121),Level:2}],[16,{TileColor:new l(245,149,99),Level:3}],[32,{TileColor:new l(246,124,95),Level:4}],[64,{TileColor:new l(246,94,59),Level:5}],[128,{TileColor:new l(237,207,114),Level:6}],[256,{TileColor:new l(237,204,97),Level:7}],[512,{TileColor:new l(237,200,80),Level:8}],[1024,{TileColor:new l(237,197,63),Level:9}],[2048,{TileColor:new l(237,194,46),Level:10}],[4096,{TileColor:new l(60,58,50),Level:11}]]),this._tilePrefab=void 0,this._otherTilePrefab=void 0,this._vanishOtherCount=0}var i=e.prototype;return i.getData=function(e){var t;return null!=(t=this._levelMap.get(e))?t:null},i.loadAsync=function(){var e=n(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new Promise((function(e,n){a.load("Tile",s,(function(r,i){r?n(r):(t._tilePrefab=i,e(i))}))})),new Promise((function(e,n){a.load("OtherTile",s,(function(r,i){r?n(r):(t._otherTilePrefab=i,e(i))}))}))]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.create=function(){var e=this,t=c.isOther(),n=o(t?this._otherTilePrefab:this._tilePrefab),r=n.getComponent(u),i=c.getValue(t);return r.init(i),t&&r.setDestroyCallback((function(){e._vanishOtherCount++})),n},i.reset=function(){this._vanishOtherCount=0},t(e,[{key:"vanishOtherCount",get:function(){return this._vanishOtherCount}}]),e}());i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});